<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
<meta property="og:type" content="website">
<meta property="og:title" content="Ezio Ruan&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Ezio Ruan&#39;s Blog">
<meta property="og:description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Ezio Ruan">
<meta property="article:tag" content="EzioRuan,Blog,Backend">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Ezio Ruan's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b65efa19a977c3cc45cda14497207451";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ezio Ruan's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Life is Strange</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/10/build-high-availability-architecture-in-oracle-cloud/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/10/build-high-availability-architecture-in-oracle-cloud/" class="post-title-link" itemprop="url">Build high availability architecture in oracle cloud</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-08-10 15:07:06" itemprop="dateCreated datePublished" datetime="2022-08-10T15:07:06+00:00">2022-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>This article will introduce how to use Oracle Cloud to build a highly available, cross-regional system. We know that high availability describes a system that is available most of the time and can provide us with services. High availability means the service is still available even during a hardware failure or system upgrade. Eliminate single points of failure through proper use of deploying instances across multiple availability domains<br>We’ll create load balancers in three different regions, each with two servers at least behind them that use the same application and expose the same ports.</p>
<p>Let’s take a look at our system design architecture design first.<br><img src="/images/oracle/architecture.png" alt="architecture"></p>
<p>In this architecture, We create three load-balancers distributed in the us-west, us-east, and Europe regions.<br>So we have three regions with identical resources. And the traffic will route to the specific load balancer with rules. And fallback to other load balancers.<br>We’ll show how to create this architecture step by step</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/08/10/build-high-availability-architecture-in-oracle-cloud/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/27/how-to-acquire-ssl-certificate-for-oracle-cloud/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/27/how-to-acquire-ssl-certificate-for-oracle-cloud/" class="post-title-link" itemprop="url">how to acquire ssl certificate for oracle cloud loadbalcer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-07-27 08:18:15" itemprop="dateCreated datePublished" datetime="2022-07-27T08:18:15+00:00">2022-07-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>for example we will acquire ssl certificate for ezioruan.com</p>
<h1 id="install"><a href="#install" class="headerlink" title="install"></a>install</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install certbot</span><br></pre></td></tr></table></figure>



<h1 id="get-ssl-certificate-by-dns-change"><a href="#get-ssl-certificate-by-dns-change" class="headerlink" title="get ssl certificate by dns change"></a>get ssl certificate by dns change</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot -d ezioruan.com --manual --preferred-challenges dns certonly</span><br></pre></td></tr></table></figure>


<p>it will ask you to create a <code>txt</code> record in your dns provider<br><img src="https://user-images.githubusercontent.com/631411/181157340-1af15699-6163-4c60-9613-24b08927cccb.png" alt="image"></p>
<p>after add the record press enter and you will get two files <code>fullchain.pem</code> and  <code>privkey.pem</code></p>
<p><img src="https://user-images.githubusercontent.com/631411/181256803-67bb54a8-9bd1-4c0a-bfbf-bde05fb30bd4.png" alt="image"></p>
<h1 id="import-to-loadbalcer"><a href="#import-to-loadbalcer" class="headerlink" title="import to loadbalcer"></a>import to loadbalcer</h1><p>parse fullchain.pem in  SSL Certificate and privkey.pem to Private Key</p>
<p>and you’ll able to use in loadbalcer’s Certificates manager</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/08/develop-apisix-plugin-via-go/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/08/develop-apisix-plugin-via-go/" class="post-title-link" itemprop="url">Develop APISIX plugin via Golang</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-08 08:18:15" itemprop="dateCreated datePublished" datetime="2022-03-08T08:18:15+00:00">2022-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Develop-APISIX-plugin-via-Golang"><a href="#Develop-APISIX-plugin-via-Golang" class="headerlink" title="Develop APISIX plugin via Golang"></a>Develop APISIX plugin via Golang</h1><p>APISIX allows users to extend functions through plugins, Although the Apache APISIX kernel code is written in Lua by the plugin, Apache APISIX supports the development of plugins in multiple languages, such as Go and Java. This article will explain in detail how to use plugins to develop Apache APISIX.<br>We will write an HTTP base auth plugin in Golang</p>
<h2 id="write-the-plugin"><a href="#write-the-plugin" class="headerlink" title="write the plugin"></a>write the plugin</h2><h3 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h3><ul>
<li>Go (&gt;&#x3D; 1.15)</li>
<li>apisix-go-plugin-runner</li>
</ul>
<p>Let’s look at the Plugin interface, To write a custom plugin, we need to implement the plugin’s interface  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">type Plugin interface &#123;</span><br><span class="line"> // Name returns the plguin name</span><br><span class="line"> Name() string</span><br><span class="line"></span><br><span class="line"> // ParseConf is the method to parse the given plugin configuration. When the</span><br><span class="line"> // configuration can&#x27;t be parsed, it will be skipped.</span><br><span class="line"> ParseConf(in []byte) (conf interface&#123;&#125;, err error)</span><br><span class="line"></span><br><span class="line"> // Filter is the method to handle request.</span><br><span class="line"> // It is like the `http.ServeHTTP`, plus the ctx and the configuration created by</span><br><span class="line"> // ParseConf.</span><br><span class="line"> //</span><br><span class="line"> // When the `w` is written, the execution of the plugin chain will be stopped.</span><br><span class="line"> // We don&#x27;t use onion model like Gin/Caddy because we don&#x27;t serve the whole request lifecycle</span><br><span class="line"> // inside the runner. The plugin is only a filter running at one stage.</span><br><span class="line"> Filter(conf interface&#123;&#125;, w http.ResponseWriter, r pkgHTTP.Request)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/03/08/develop-apisix-plugin-via-go/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/08/resize-disk-on-ubuntu-oracle-cloud/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/08/resize-disk-on-ubuntu-oracle-cloud/" class="post-title-link" itemprop="url">resize disk sise for ubuntu instance in Oracle Cloud</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-08 08:18:15" itemprop="dateCreated datePublished" datetime="2022-02-08T08:18:15+00:00">2022-02-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>oracle has tools to increase disk sise for Oracle Image, but not ubuntu, we need to do it manualy</p>
<p>The script internally calls growpart from cloud-guest-utils and resize2fs. So if you are not using LVM etc, to grow main ext4 partition of a boot volume in Ubuntu, simply run:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo growpart /dev/sda 1</span><br><span class="line">sudo resize2fs -z ./sda1.e2undo /dev/sda1</span><br></pre></td></tr></table></figure>

<p>Since Oracle puts the boot partition after main, to be safe you can also install efibootmgr and check </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">efibootmgr -v </span><br></pre></td></tr></table></figure>
<p>output. If yours also looks like</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Boot0002* UEFI ORACLE BlockVolume       PciRoot(0x0)/Pci(0x12,0x7)/Pci(0x0,0x0)/SCSI(0,1)N.....YM....R,Y.</span><br></pre></td></tr></table></figure>
<p>then it means it uses SCSI disk&#x2F;partition number to locate boot partition and it should be safe to reboot now.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/02/08/gpg-unusable-public-key/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/08/gpg-unusable-public-key/" class="post-title-link" itemprop="url">gpg unusable key</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-08 08:18:15" itemprop="dateCreated datePublished" datetime="2020-02-08T08:18:15+00:00">2020-02-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="fix-gpg-unusable-key"><a href="#fix-gpg-unusable-key" class="headerlink" title="fix gpg unusable key"></a>fix gpg unusable key</h1><p>when we import gpg keys from backup, and try to use it for decript&#x2F;encript, it will tell that the key is not usable,<br>we need to trust the keys first</p>
<p>use <code>gpg --list-keys</code> to list all keys </p>
<p>the output would like this </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pub   2048R/B660885G 2013-05-16 [expires: 2030-12-31]</span><br><span class="line">uid       [] SAP Admin &lt;xxx@xx.com&gt;</span><br></pre></td></tr></table></figure>

<p>we can get the keys id here <code>B660885G</code></p>
<p>and then <code>gpg&gt;trust</code></p>
<p>If you’re sure about the authenticity of your key, select the trust level 5.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/06/17/setup-sftp-account-and-two-ways-login/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/17/setup-sftp-account-and-two-ways-login/" class="post-title-link" itemprop="url">setup sftp account and two differences authentication logins</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-06-17 15:18:15" itemprop="dateCreated datePublished" datetime="2016-06-17T15:18:15+00:00">2016-06-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="sftp-is-a-way-to-use-ftp-on-a-linux-server-it-use-the-ssh-account-to-connect-the-server-we-can-setup-the-sftp-account-and-provide-differences-authentication"><a href="#sftp-is-a-way-to-use-ftp-on-a-linux-server-it-use-the-ssh-account-to-connect-the-server-we-can-setup-the-sftp-account-and-provide-differences-authentication" class="headerlink" title="sftp is a way to use ftp on a linux server. it use the ssh account to connect the server, we can setup the sftp account and provide differences authentication"></a>sftp is a way to use ftp on a linux server. it use the ssh account to connect the server, we can setup the sftp account and provide differences authentication</h1><h2 id="create-sftp-account-without-shell-permission"><a href="#create-sftp-account-without-shell-permission" class="headerlink" title="create sftp account without shell permission"></a>create sftp account without shell permission</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser --shell /bin/false sftpuser</span><br></pre></td></tr></table></figure>

<p>then set the password for the user</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd sftpuser</span><br></pre></td></tr></table></figure>

<h2 id="create-sftp-directory-for-the-user-and-give-the-permission"><a href="#create-sftp-directory-for-the-user-and-give-the-permission" class="headerlink" title="create sftp directory for the user, and give the permission"></a>create sftp directory for the user, and give the permission</h2><p>&#x2F;var&#x2F;sftp&#x2F;files here</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /var/sftp/files</span><br><span class="line">sudo chown sftpuser:sftpuser /var/sftp/files</span><br><span class="line"></span><br><span class="line">sudo chown root:root /var/sftp</span><br><span class="line">sudo chmod 755 /var/sftp</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="create-public-key"><a href="#create-public-key" class="headerlink" title="create public key"></a>create public key</h2><p>we need to create the files in the user’s home directory, and generate the authentication keys</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/sftpuser/.ssh</span><br></pre></td></tr></table></figure>

<p>generate keys by <code>ssh-keygen -t rsa</code> and point the file location  to <code>/home/sftpuser/.ssh/id_rsa</code></p>
<p>set authorized keys and permission</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd .ssh</span><br><span class="line">touch authorized_keys</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class="line">cd ..</span><br><span class="line">chmod 700 .ssh</span><br><span class="line">chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure>

<p>save the generate private key to your compucter and give 600 permission</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /home/sftp/.ssh/id_rsa &gt; sftp.pem</span><br><span class="line">chmod 600 sftp.pem</span><br></pre></td></tr></table></figure>


<h2 id="update-sftp-user-config-to-enable-password-and-public-key-authentication"><a href="#update-sftp-user-config-to-enable-password-and-public-key-authentication" class="headerlink" title="update sftp user config to enable password and public key authentication"></a>update sftp user config to enable password and public key authentication</h2><p>edit file at &#x2F;etc&#x2F;ssh&#x2F;sshd_config, append below lines</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Match User sftpuser</span><br><span class="line">	ForceCommand internal-sftp</span><br><span class="line">	PasswordAuthentication yes</span><br><span class="line">	ChrootDirectory /var/sftp</span><br><span class="line">	PermitTunnel no</span><br><span class="line">	AllowAgentForwarding no</span><br><span class="line">	AllowTcpForwarding no</span><br><span class="line">	X11Forwarding no</span><br><span class="line">	RSAAuthentication yes</span><br><span class="line">	PubkeyAuthentication yes</span><br><span class="line">	AuthorizedKeysFile /home/sftpuser/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>


<p>set PasswordAuthentication to yes to enable password authentication,<br>set PubkeyAuthentication to yes to enable public key authentication,</p>
<p>and then restart sshd services<br><code>sudo service sshd restart</code></p>
<h2 id="test-sftp-connection-by-command-line"><a href="#test-sftp-connection-by-command-line" class="headerlink" title="test sftp connection by command line"></a>test sftp connection by command line</h2><p>password authentication</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp  sftpuser@&lt;server_host&gt;</span><br></pre></td></tr></table></figure>


<p>public key  authentication</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp -i sftp.pem sftpuser@&lt;server_host&gt;</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/03/04/a-simple-comic-script/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/04/a-simple-comic-script/" class="post-title-link" itemprop="url">一个简单的漫画下载脚本</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-04 15:07:06" itemprop="dateCreated datePublished" datetime="2016-03-04T15:07:06+00:00">2016-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近看暗杀教室实在是太麻烦了。手机app不更新 贴吧只有最新一话 网页在线看广告多得要死</p>
<p>简单的写了下 只针对暗杀教室这个漫画 不过其他漫画理论上也是可以的<br>地址在 <a target="_blank" rel="noopener" href="https://github.com/ezioruan/Ansatsu-Kyoushitsu">https://github.com/ezioruan/Ansatsu-Kyoushitsu</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2016/01/21/fix_vim_hangs_due_to_xcode_upgrade/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Ezio Ruan">
      <meta itemprop="description" content="Focus on backend development and work remotelly. Happy coding, happy living!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ezio Ruan's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/21/fix_vim_hangs_due_to_xcode_upgrade/" class="post-title-link" itemprop="url">解决xcode升级vim插件无法使用问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-21 19:24:00" itemprop="dateCreated datePublished" datetime="2016-01-21T19:24:00+00:00">2016-01-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-17 13:40:46" itemprop="dateModified" datetime="2022-08-17T13:40:46+00:00">2022-08-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>xcode经常升级，升级以后以前的插件都不能用了 其实是因为xcode升级以后产品id变掉了<br>这个确实坑爹 都没有做自动适配的</p>
<p>一行代码搞定冲突</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find ~/Library/Application\ Support/Developer/Shared/Xcode/Plug-ins -name Info.plist -maxdepth 3 | xargs -I&#123;&#125; defaults write &#123;&#125; DVTPlugInCompatibilityUUIDs -array-add `defaults <span class="built_in">read</span> /Applications/Xcode.app/Contents/Info.plist DVTPlugInCompatibilityUUID`</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ezio Ruan"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Ezio Ruan</p>
  <div class="site-description" itemprop="description">Focus on backend development and work remotelly. Happy coding, happy living!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ezioruan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ezioruan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:ezioruan@gmail.com" title="E-Mail → mailto:ezioruan@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ezio Ruan</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
